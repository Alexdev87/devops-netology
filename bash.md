[200~# Ð”Ð¾Ð¼Ð°ÑˆÐ½ÐµÐµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ Ðº Ð·Ð°Ð½ÑÑ‚Ð¸ÑŽ "4.1. ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ Ð¾Ð±Ð¾Ð»Ð¾Ñ‡ÐºÐ° Bash: ÐŸÑ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð½Ð°Ð²Ñ‹ÐºÐ¸"

## ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð° 1

Ð•ÑÑ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚:
```bash
a=1
b=2
c=a+b
d=$a+$b
e=$(($a+$b))
```

ÐšÐ°ÐºÐ¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼ c,d,e Ð±ÑƒÐ´ÑƒÑ‚ Ð¿Ñ€Ð¸ÑÐ²Ð¾ÐµÐ½Ñ‹? ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ?

| ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ  | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ | ÐžÐ±Ð¾ÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ |
| ------------- | ------------- | ------------- |
| `c`  | a+b   | Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ ÐºÐ°Ðº Ð½Ðµ Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ñ‹ Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¸ Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¼Ð°Ñ‚ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼ |
| `d`  | 1+2   | a Ð¸ b Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ñ‹ Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ…, Ð½Ð¾ Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¼Ð°Ñ‚ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼  |
| `e`  | 3  | Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð°Ñ€Ð¸Ñ„Ð¼ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ ÑÐ»Ð¾Ð¶ÐµÐ½Ð¸Ñ |


## ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð° 2
ÐÐ° Ð½Ð°ÑˆÐµÐ¼ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ ÑƒÐ¿Ð°Ð» ÑÐµÑ€Ð²Ð¸Ñ Ð¸ Ð¼Ñ‹ Ð½Ð°Ð¿Ð¸ÑÐ°Ð»Ð¸ ÑÐºÑ€Ð¸Ð¿Ñ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÐµÐ³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ, Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ Ð´Ð°Ñ‚Ñƒ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¾Ðº Ð´Ð¾ Ñ‚ÐµÑ… Ð¿Ð¾Ñ€, Ð¿Ð¾ÐºÐ° ÑÐµÑ€Ð²Ð¸Ñ Ð½Ðµ ÑÑ‚Ð°Ð½ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ð¼ (Ð¿Ð¾ÑÐ»Ðµ Ñ‡ÐµÐ³Ð¾ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒÑÑ). Ð’ ÑÐºÑ€Ð¸Ð¿Ñ‚Ðµ Ð´Ð¾Ð¿ÑƒÑ‰ÐµÐ½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°, Ð¸Ð·-Ð·Ð° ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒÑÑ, Ð¿Ñ€Ð¸ ÑÑ‚Ð¾Ð¼ Ð¼ÐµÑÑ‚Ð¾ Ð½Ð° Ð–Ñ‘ÑÑ‚ÐºÐ¾Ð¼ Ð”Ð¸ÑÐºÐµ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÑ‚ÑÑ. Ð§Ñ‚Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÐµÐ³Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ:
```bash
while ((1==1)
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
	fi
done
```

### Ð’Ð°Ñˆ ÑÐºÑ€Ð¸Ð¿Ñ‚:
```bash
while ((1==1)) â€“ Ð½Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð°ÑÑÑ ÑÐºÐ¾Ð±ÐºÐ°
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
        else exit    -  Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ ÑƒÑÐ»Ð¾Ð²Ð¸Ðµ Ð´Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð°  
	fi
done
```

## ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð° 3
ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ñ‚Ñ€Ñ‘Ñ… IP: `192.168.0.1`, `173.194.222.113`, `87.250.250.242` Ð¿Ð¾ `80` Ð¿Ð¾Ñ€Ñ‚Ñƒ Ð¸ Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð² Ñ„Ð°Ð¹Ð» `log`. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿ÑÑ‚ÑŒ Ñ€Ð°Ð· Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑƒÐ·Ð»Ð°.

### Ð’Ð°Ñˆ ÑÐºÑ€Ð¸Ð¿Ñ‚:
```bash
cat host1.sh â€“ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° host
hosts=(192.168.0.1 173.194.222.113 87.250.250.24)
timeout=5
for i in {1..5}
do
date >>hosts.log
    for h in ${hosts[@]}
    do
	curl -Is --connect-timeout $timeout $h:80 >/dev/null
        echo "    check" $h status=$? >>hosts.log
    done
done
```

## ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð° 4
ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð´Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸Ð· Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰ÐµÐ³Ð¾ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ñ‚Ð°Ðº, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐ»ÑÑ Ð´Ð¾ Ñ‚ÐµÑ… Ð¿Ð¾Ñ€, Ð¿Ð¾ÐºÐ° Ð¾Ð´Ð¸Ð½ Ð¸Ð· ÑƒÐ·Ð»Ð¾Ð² Ð½Ðµ Ð¾ÐºÐ°Ð¶ÐµÑ‚ÑÑ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ð¼. Ð•ÑÐ»Ð¸ Ð»ÑŽÐ±Ð¾Ð¹ Ð¸Ð· ÑƒÐ·Ð»Ð¾Ð² Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ - IP ÑÑ‚Ð¾Ð³Ð¾ ÑƒÐ·Ð»Ð° Ð¿Ð¸ÑˆÐµÑ‚ÑÑ Ð² Ñ„Ð°Ð¹Ð» error, ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€ÐµÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ.

### Ð’Ð°Ñˆ ÑÐºÑ€Ð¸Ð¿Ñ‚:
```bash
cat host2.sh_
hosts=(192.168.0.1 173.194.222.113 87.250.250.24)
timeout=5
res=0

while (($res == 0))
do
    for h in ${hosts[@]}
    do
	curl -Is --connect-timeout $timeout $h:80 >/dev/null
	res=$?
	if (($res != 0))
	then
	    echo "    ERROR on " $h status=$res >>hosts2.log
	fi
    done
done
```


